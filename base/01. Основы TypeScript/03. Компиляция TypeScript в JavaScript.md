****# Компиляция TypeScript в JavaScript (tsconfig.json)

Компиляция TypeScript в JavaScript — это процесс преобразования кода, написанного на TypeScript, в эквивалентный код на
JavaScript, который может быть выполнен в браузере или Node.js. Основным инструментом для этого является компилятор
TypeScript (`tsc`), а настройки компиляции задаются в файле `tsconfig.json`.

## Основы компиляции TypeScript

TypeScript — это надмножество JavaScript, которое добавляет статическую типизацию и другие возможности. Компилятор `tsc`
преобразует TypeScript-код в JavaScript, удаляя типы и другие конструкции, специфичные для TypeScript.

Для компиляции используется команда:

```bash
tsc
```

Если в проекте есть файл tsconfig.json, компилятор автоматически использует его настройки. Без этого файла можно указать
параметры компиляции через командную строку, например:

```bash
tsc app.ts --target es6 --outDir dist
```

## Роль файла `tsconfig.json`

Файл `tsconfig.json` — это JSON-файл, который определяет настройки компиляции и структуру проекта. Он позволяет:

* Настроить параметры компиляции (например, целевую версию JavaScript, модули, строгие проверки типов).
* Указать, какие файлы включать или исключать из компиляции.
* Структурировать проект, упрощая управление большими кодовыми базами.

Файл обычно размещается в корне проекта. Пример минимального `tsconfig.json`:

```json
{
  "compilerOptions": {
    "target": "es6",
    "module": "commonjs",
    "outDir": "./dist",
    "strict": true
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules"
  ]
}
```

## Основные секции `tsconfig.json`

1. `compilerOptions` — определяет параметры компиляции.
2. `include` — указывает, какие файлы включать в компиляцию (например, все ts файлы в папке `src`).
3. `exclude` — исключает файлы или парки из компиляции (например, `node_modules`).
4. `extends` — позволяет наследовать настройки из другого `tsconfig.json`.
5. `files` — точный список файлов для компиляции (используется редко, если нужно компилировать конкретные файлы).

## Ключевые параметры в `compilerOptions`

Вот наиболее важные настройки в `compilerOptions`:

### target

Определяет версию JavaScript, в которую компилируется код.

Примеры: "es5", "es6" (или "es2015"), "esnext".

```
"target": "es6"
```

Указывает, что код будет компилироваться в ECMAScript 6.

### module

Задает систему модулей.

Возможные значения: "commonjs", "esnext", "es6", "amd", "system".

```
"module": "commonjs"
```

Подходит для Node.js. Для браузеров чаще используется "es6" или "esnext".

### outDir

## Пример полного `tsconfig.json`

```json
{
  "compilerOptions": {
    "target": "es6",
    "module": "commonjs",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "sourceMap": true,
    "noEmitOnError": true,
    "moduleResolution": "node"
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist"
  ]
}
```

Этот файл указывает, что:

* Код компилируется в ES6.
* Используется система модулей CommonJS.
* Исходные файлы находятся в папке src, а скомпилированный код сохраняется в dist.
* Включены строгие проверки типов.
* Исключены папки node_modules и dist.

## Компиляция проекта

### 1. Инициализация `tsconfig.json`

Создайте файл автоматически с помощью команды:

```
tsc --init
```

Это создаст `tsconfig.json` с настройками по умолчанию и комментариями.

### 2. Компиляция

Выполните команду tsc в корне проекта, где лежит tsconfig.json. Компилятор обработает все файлы, указанные в include,
согласно настройкам.

### 3. Автоматическая компиляция

Для отслеживания изменений в файлах используйте флаг --watch.

```
tsc --watch
```

## Расширенные возможности

### Наследование конфигурации

Можно использовать "extends" для разделения конфигураций.

Например:

```json
{
  "extends": "./tsconfig.base.json",
  "compilerOptions": {
    "outDir": "./dist/dev"
  }
}
```

### Пути модулей (paths)

Позволяет задавать псевдонимы для путей импорта:

```json
{
  "compilerOptions": {
    "baseUrl": "src",
    "paths": {
      "@utils/*": [
        "utils/*"
      ]
    }
  }
}
```

Теперь вместо `import { func } from '../../utils/helper'` можно написать `import { func } from '@utils/helper'`.

### Проекты с несколькими конфигурациями

Для разных окружений (например, dev и prod) создавайте отдельные файлы tsconfig.dev.json и tsconfig.prod.json, наследуя
общие настройки.

## Типичные ошибки и их решение

1. Файлы не компилируются:
    * Проверьте, включены ли нужные файлы в "include".
    * Убедитесь, что файлы не попали в "exclude".
2. Ошибки типов:
    * Если используются сторонние библиотеки без типов, установите их через @types, например: `npm install @types/node`
3. Несовместимость модулей:
    * Убедитесь, что "module" и "moduleResolution" соответствуют вашей среде (Node.js или браузер).

## Советы

* Используйте "strict": true для новых проектов, чтобы избежать ошибок, связанных с типами.
* Для больших проектов добавьте "rootDir" и "outDir", чтобы сохранить структуру.
* Регулярно обновляйте TypeScript (`npm install -g typescript`), так как новые версии добавляют улучшения и исправляют
  ошибки.****